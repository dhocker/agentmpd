{#
# AgentMPD - web app for controlling an mpd instance
# Copyright (C) 2015  Dave Hocker (email: AtHomeX10@gmail.com)
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, version 3 of the License.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
# See the LICENSE file for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program (the LICENSE file).  If not, see <http://www.gnu.org/licenses/>.
#}

{% extends "layout.html" %}

{% block head %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='home.css') }}">
{% endblock %}

{% block body %}
    <div>
        <h2>Player ({= host =}:{= port =})</h2>
        <div class="transport">
            <div>
                {# Note we are using {= =} for the angularjs interpolation tag #}
                <button class="transport-control" ng-click="play_first()" title="Play first">
                    <img class="tx-control-img" src="{{ url_for('static', filename='playback-first.png') }}"/>
                </button>
                <button class="transport-control" ng-click="play_previous()" title="Play previous">
                    <img class="tx-control-img" src="{{ url_for('static', filename='playback-previous.png') }}"/>
                </button>
                <button class="transport-control" ng-click="toggle_playing()"  title="Start playing" ng-hide="playing">
                    <img class="tx-control-img" src="{{ url_for('static', filename='playback-start.png') }}"/>
                </button>
                <button class="transport-control" ng-click="toggle_playing()"  title="Pause playing" ng-show="playing">
                    <img class="tx-control-img" src="{{ url_for('static', filename='playback-pause.png') }}"/>
                </button>
                <button class="transport-control" ng-click="play_stop()"  title="Stop playing">
                    <img class="tx-control-img" src="{{ url_for('static', filename='playback-stop.png') }}"/>
                </button>
                <button class="transport-control" ng-click="play_next()"  title="Play next">
                    <img class="tx-control-img" src="{{ url_for('static', filename='playback-next.png') }}"/>
                </button>
                <button class="transport-control" ng-click="play_last()" title="Play last">
                    <img class="tx-control-img" src="{{ url_for('static', filename='playback-last.png') }}"/>
                </button>
                <span>{= status =}</span>
            </div>
        </div>
        <div class="volume-control">
            <button class="transport-control" style="float:left;" ng-click="volume_down()" title="Decrease">
                <img class="vol-control-img" src="{{ url_for('static', filename='volume-down.png') }}"/>
            </button>
            {# Volume bar is a jquery ui progressbar #}
            <div id="volumebar" class="transport-control">
                <div class="progress-label">{= volume =}</div>
            </div>
            <button class="transport-control" style="float:left;" ng-click="volume_up()" title="Increase">
                <img class="vol-control-img" src="{{ url_for('static', filename='volume-up.png') }}"/>
            </button>
        </div>

        <div class="clear"></div>

        <div class="now-playing">
            <table class="now-playing-table">
                <tr>
                    <td class="now-playing-hdr">Now Playing</td>
                    <td>
                        <span class="song-title">[{= currently_playing.pos1 =}] {= currently_playing.title =}</span></br>
                        <span class="album">{= currently_playing.album =}</span></br>
                        <span class="artist-name">{= currently_playing.artist =}</span>
                    </td>
                </tr>
            </table>
        </div>

        <div>
            <table class="common-table">
                <tr>
                    <th>Play</th>
                    <th>Title/Name/Stream</th>
                    <th>Album</th>
                    <th>Artist</th>
                </tr>
                <tr id="{= x.pos =}" class="playlist-entry" ng-class="x.class" ng-dblclick="play_song(x.pos)" ng-repeat="x in current_playlist.playlist">
                    <td><button ng-click="play_song(x.pos)" title="Play">{= x.pos1 =}</button></td>
                    <td>{= x.track =}</td>
                    <td>{= x.album =}</td>
                    <td>{= x.artist =}</td>
                </tr>
            </table>
        </div>
    </div>
{% endblock %}

{% block footer_links %}

{% endblock %}

{% block angularjs %}
    {# Include angularjs scripts here #}
    <script src="{{ url_for('static', filename='js/home.js') }}" type="text/javascript"></script>
{% endblock %}

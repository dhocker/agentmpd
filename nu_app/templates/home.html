{#
# AgentMPD - web app for controlling an mpd instance
# Copyright (C) 2015  Dave Hocker (email: AtHomeX10@gmail.com)
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, version 3 of the License.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
# See the LICENSE file for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program (the LICENSE file).  If not, see <http://www.gnu.org/licenses/>.
#}

{% extends "layout.html" %}

{% block head %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='home.css') }}">
{% endblock %}

{% block body %}
    <div class="container">
        <div class="row">
        <h2 class="col-md-12">MPD Player on {= host =}:{= port =}</h2>
        </div>
        <div class="row" style="margin-bottom: 20px;">
            <div class="col-md-9">
                {# Note we are using {= =} for the angularjs interpolation tag #}
                <button class="btn btn-default btn-md" ng-click="play_first()" title="Play first">
                    <img class="tx-control-img" src="{{ url_for('static', filename='playback-first.png') }}"/>
                </button>
                <button class="btn btn-default btn-md" ng-click="play_previous()" title="Play previous">
                    <img class="tx-control-img" src="{{ url_for('static', filename='playback-previous.png') }}"/>
                </button>
                <button class="btn btn-default btn-md" ng-click="toggle_playing()"  title="Start playing" ng-hide="playing">
                    <img class="tx-control-img" src="{{ url_for('static', filename='playback-start.png') }}"/>
                </button>
                <button class="btn btn-default btn-md" ng-click="toggle_playing()"  title="Pause playing" ng-show="playing">
                    <img class="tx-control-img" src="{{ url_for('static', filename='playback-pause.png') }}"/>
                </button>
                <button class="btn btn-default btn-md" ng-click="play_stop()"  title="Stop playing">
                    <img class="tx-control-img" src="{{ url_for('static', filename='playback-stop.png') }}"/>
                </button>
                <button class="btn btn-default btn-md" ng-click="play_next()"  title="Play next">
                    <img class="tx-control-img" src="{{ url_for('static', filename='playback-next.png') }}"/>
                </button>
                <button class="btn btn-default btn-md" ng-click="play_last()" title="Play last">
                    <img class="tx-control-img" src="{{ url_for('static', filename='playback-last.png') }}"/>
                </button>
                <span>{= status =}</span>
            </div>
            {# TODO: The layout of the volume bar could use some work. It's functional but lacks polish. #}
            <div class="col-md-3">
                <button class="btn btn-default btn-sm" style="float:left;" ng-click="volume_down()" title="Decrease">
                    <img class="vol-control-img" src="{{ url_for('static', filename='volume-down.png') }}"/>
                </button>

                <img class="" src="{{ url_for('static', filename='agentmpd64.png') }}" width="16"/>

                <button class="btn btn-default btn-sm" style="float:right;" ng-click="volume_up()" title="Increase">
                    <img class="vol-control-img" src="{{ url_for('static', filename='volume-up.png') }}"/>
                </button>

                {# Volume bar is a Bootstrap progressbar #}
                <div class="progress">
                    <div id="volumebar" class="progress-bar" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width:20%">
                      20%
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
            <table class="table table-bordered">
                <tr>
                    <td class="now-playing-hdr">Now Playing</td>
                    <td>
                        <span class="song-title">[{= currently_playing.pos1 =}] {= currently_playing.title =}</span></br>
                        <span class="album">{= currently_playing.album =}</span></br>
                        <span class="artist-name">{= currently_playing.artist =}</span>
                    </td>
                </tr>
            </table>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default">
                    <table class="table table-condensed table-striped table-hover table-fixed">
                        <thead>
                            <tr>
                                <th class="col-xs-1">Play</th>
                                <th>Title/Name/Stream</th>
                                <th>Album</th>
                                <th>Artist</th>
                            </tr>
                        </thead>
                    </table>
                    <div class="table-fixed-content">
                        <table class="table table-condensed table-striped table-hover table-fixed">
                            <tbody>
                                <tr id="{= x.pos =}" class="" ng-class="x.class" ng-dblclick="play_song(x.pos)" ng-repeat="x in current_playlist.playlist">
                                    <td class="col-xs-1"><button class="btn btn-primary btn-xs" ng-click="play_song(x.pos)" title="Play">{= x.pos1 =}</button></td>
                                    <td>{= x.track =}</td>
                                    <td>{= x.album =}</td>
                                    <td>{= x.artist =}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block footer_links %}

{% endblock %}

{% block angularjs %}
    {# Include angularjs scripts here #}
    <script src="{{ url_for('static', filename='js/home.js') }}" type="text/javascript"></script>
{% endblock %}
